<!DOCTYPE html>
<html>
	<head>
		<title>ログイン状態</title>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
		<script src="../../js/jquery.json-2.3.min.js"></script>
		<script src="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
		<link rel="stylesheet" href="../../css/odenki-theme.min.css" />
		<link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css"/>
	</head>
	<body>
		<div data-role="page">
			<div data-role="header" id="header"></div>
			<div data-role="navbar" id="navbar"></div>
			<div data-role="content">
				<div data-role="collapsible" id="emailUser">
					<h1>登録済みのメールアドレス</h1>
					<input type="email" placeholder="sample@example.com" class="email">
					</input>
				</div>
				<div data-role="collapsible" id="login">
					<h1>メールアドレスによるログイン</h1>
					<input type="email" placeholder="myname@example.com">
					</input>
					<input type="password" placeholder="password">
					</input>
					<input type="button" value="ログイン" onclick="login();">
					</input>
				</div>
				<div data-role="collapsible" id="setEmail">
					<h1>メールアドレスの登録</h1>
					<input type="email" placeholder="myname@example.com" class="email">
					</input>
					<input type="button" value="登録確認のためのメールを送信する" onclick="setEmail();">
					</input>
				</div>
				<div data-role="collapsible" id="setPassword">
					<h1>パスワードの設定</h1>
					<input type="password" placeholder="password" class="password">
					</input>
					<input type="password" placeholder="確認のためもう一度" class="password2">
					</input>
					<input type="button" value="パスワードを設定する" onclick="setPassword();">
					</input>
					<input class="nonce" >
					</input>
				</div>
				<div data-role="collapsible" id="admin">
					<h1>デバッグ用</h1>
					<textarea readonly="readonly"> </textarea>
				</div>
			</div>
		</div>
		<script src="../../js/header.js"></script>
		<script>
			lib.ui.makeHeader();
            lib.ui.makeNavbar("d");
            $.ajax({
                url : "/api/Email",
                dataType : "json",
                success : function(data) {
                    $("#admin textarea").val($.toJSON(data));
                    $("#emailUser .email").val(data.result.email);
                    $("#emailUser .emailUserId").val(data.result.emailUserId);
                    $("#status").val(data.result.email);
                },
                error : function(data) {
                    $("#admin textarea").val($.toJSON(data));
                    $("#emailUser .email").val(data.result.email);
                    $("#emailUser .emailUserId").val(data.result.emailUserId);
                    $("#status").val(data.result.email);
                }
            });
            lib.showElement("table");
		</script>
		<!--
		<script>
		function setEmail() {
		lib.hideElement("table");
		lib.showElement("#sentEmail");
		$.ajax({
		url : "/api/Email?method=setEmail",
		data : {
		email : $("#email").val()
		},
		dataType : "json",
		success : function(data) {
		$("#admin textarea").text($.toJSON(data.result));
		},
		error : function(data) {
		}
		});
		}
		</script>
		<script>
		function setPassword() {
		hideAll();
		$("#setEmail").css("display", "block");
		$.ajax({
		url : "/api/Email",
		dataType : "json",
		success : function(data) {
		$("#setEmail").text(data.result.setEmail);
		$("#sendEmail").css("display", "block");
		},
		error : function(data) {
		$("#error").css("display", "block");
		}
		});
		}
		</script>
		<script>
		function startOver() {
		hideAll();
		$("#setEmail").css("display", "block");
		$.ajax({
		url : "/api/Email?method=startOver",
		data : {
		email : $("#email").val()
		},
		dataType : "json",
		success : function(data) {
		//$("#setEmail").css("visibility", "visible");
		},
		error : function(data) {
		//$("#error").css("visibility", "visible");
		}
		});
		}
		</script>
		-->
	</body>
</html>